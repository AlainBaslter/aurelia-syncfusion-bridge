/*!
*  filename: ej.pivottreemap.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./ej.waitingpopup.min","./../datavisualization/ej.treemap.min"],n):n()})(function(){(function(n,t,i){t.widget("ejPivotTreeMap","ej.PivotTreeMap",{_rootCSS:"e-pivottreemap",element:null,model:null,validTags:["div","span"],defaults:n.extend(t.datavisualization.TreeMap.prototype.defaults,{url:"",cssClass:"",currentReport:"",operationalMode:"clientmode",customObject:{},isResponsive:!1,dataSource:{data:null,columns:[],cube:"",catalog:"",rows:[],values:[],filters:[]},serviceMethodSettings:{initialize:"InitializeTreeMap",drillDown:"DrillTreeMap"},locale:"en-US",drillSuccess:null,beforeServiceInvoke:null,afterServiceInvoke:null,load:null,renderComplete:null,renderFailure:null,renderSuccess:null}),dataTypes:{serviceMethodSettings:"data",customObject:"data"},locale:t.util.valueFunction("locale"),getOlapReport:function(){return this._olapReport},setOlapReport:function(n){this._olapReport=n},getJsonRecords:function(){return this._JSONRecords},setJsonRecords:function(t){this._JSONRecords=n.parseJSON(t)},_init:function(){this._initPrivateProperties();this._load()},_destroy:function(){this.element.empty().removeClass("e-pivottreemap"+this.model.cssClass);this._waitingPopup!=i&&this._waitingPopup._destroy()},_initPrivateProperties:function(){this._id=this.element.attr("id");ptreemapProxy=this;this._olapReport="";this._JSONRecords=null;this._treeMapDatasource=[];this._currentAction="initialize";this._selectedItem="";this._selectedTagInfo=null;this._tagCollection=[];this._startDrilldown=!1;this._isDrilled=!1;this._treeMap=null;this._waitingPopup=null},_load:function(){this.element.addClass(this.model.cssClass);typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?(this.model.customObject=oclientProxy.model.customObject,n("#"+oclientProxy._id+"_maxView")[0]?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!0}):oclientWaitingPopup.show()):(this.element.ejWaitingPopup({showOnInit:!0}),this._waitingPopup=this.element.data("ejWaitingPopup"));this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:this._currentAction,element:this.element,customObject:this.model.customObject});var r=JSON.stringify(this.model.customObject);if(this.model.dataSource.data==null&&this.model.url==""&&this.model.dataSource.cube==""){this.renderTreeMapFromJSON(null);this._waitingPopup.hide();return}this.model.dataSource.data==null&&this.model.url!=""||this.model.dataSource.data!=null&&this.model.url!=""&&this.model.operationalMode==t.PivotTreeMap.OperationalMode.ServerMode?(this.model.operationalMode=t.PivotTreeMap.OperationalMode.ServerMode,this.model.customObject!=""&&this.model.customObject!=null&&this.model.customObject!=i?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.initialize,JSON.stringify({action:"initialize",currentReport:this.model.currentReport,customObject:r}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.initialize,JSON.stringify({action:"initialize"}),this.renderControlSuccess)):(this.model.operationalMode=t.PivotTreeMap.OperationalMode.ClientMode,this.model.dataSource.cube!=""&&t.olap.base.getJSONData({action:"initialLoad"},this.model.dataSource,this))},generateJSON:function(n,i){for(var d,a,h,rt,v,g,e,u,f,o,nt=[],tt=[],y="",k=[],p=[],s=[],w=[],l={},r=0;r<this.model.dataSource.values[0].measures.length;r++)y+=y==""?this.model.dataSource.values[0].measures[r].fieldCaption:"~~"+this.model.dataSource.values[0].measures[r].fieldCaption;var ut=this.model.dataSource.values[0].axis,it=this.model.dataSource.rows.length,c=i[0][0].ColSpan,b=0;for(c-it<=0?(c=0,b=it):(b=c,c=b-1),u=[],r=0;r<i.length;r++)for(f=0;f<i[r].length;f++)if(d=null,i[r][f].CSS==" value"&&w.push(i[r][f].Value),i[r][f].CSS=="rowheader"&&i[r][f].Value!=""){if(o={},d=i[r][f].Info+"::"+i[r][f].State,tt.push(i[r][f].Info.replace(/&/g,"&amp;")),nt.push(d),u.length==0&&i[r][f].Info.split(".")[0].indexOf("Measures")<0&&(o.level=r,o.index=f,o.label=i[r][f].Value,u.push(o)),u.length!=0)for(e=0;e<u.length;e++)if(!t.isNullOrUndefined(u[e]))if(u[e].index==f&&u[e].level!=r){u[e].level=r;u[e].label=u[e].label+"~~"+i[r][f].Value;break}else if(u[e].level==r){for(a=!1,h=0;h<u.length;h++)if(!t.isNullOrUndefined(u[h])&&u[h].index==f){a=!0;break}if(!a&&i[r][f].Info.split(".")[0].indexOf("Measures")<0){o.level=r;o.index=f;o.label=i[r][f].Value;u.push(o);break}}}else if(i[r][f].CSS=="summary"&&u.length!=0)for(e=0;e<u.length;e++)if(!t.isNullOrUndefined(u[e])&&u[e].index==f){delete u[e];break}for(e=0;e<u.length;e++)t.isNullOrUndefined(u[e])||b==u[e].label.split("~~").length&&s.push(u[e].label);for(u=[],r=0;r<i.length;r++)for(f=0;f<i[r].length;f++)if(i[r][f].CSS=="colheader"&&i[r][f].Value!=""){if(o={},u.length==0&&i[r][f].Info.split(".")[0].indexOf("Measures")<0&&(o.level=f,o.index=r,o.label=i[r][f].Value,u.push(o)),u.length!=0)for(e=0;e<u.length;e++)if(!t.isNullOrUndefined(u[e]))if(u[e].index==r&&u[e].level!=f&&i[r][f].Info.split(".")[0].indexOf("Measures")<0){u[e].index=r;u[e].label=u[e].label+"~~"+i[r][f].Value;break}else if(u[e].level==f&&i[r][f].Info.split(".")[0].indexOf("Measures")<0){for(a=!0,h=0;h<u.length;h++)if(!t.isNullOrUndefined(u[h])&&(a=!1,u[h].index==r)){a=!0;break}if(!a&&i[r][f].Info.split(".")[0].indexOf("Measures")<0){o.level=f;o.index=r;o.label=i[r][f].Value;u.push(o);break}}}else if(i[r][f].CSS=="summary"&&u.length!=0)for(e=0;e<u.length;e++)if(!t.isNullOrUndefined(u[e])&&u[e].index==r){delete u[e];break}for(e=0;e<u.length;e++)t.isNullOrUndefined(u[e])||p.push(u[e].label);if(y!=""&&ut==t.olap.AxisName.Column)for(r=0;r<p.length;r++)p[r]=p[r]+"~~"+y;else for(r=0;r<s.length;r++)s[r]=s[r]+"~~"+y;if(c==0)for(rt=w.length/p.length,r=0;r<s.length;r++){for(u=[],f=r;f<w.length;f=f+rt)o={},o.Item1=s[r].indexOf("~~")>=0?s[r].split("~~")[0]:s[r],o.Item2=w[f],u.push(o);k.push(u)}else{for(v=[],g=null,r=0;r<s.length;r++)for(u=[],f=0;f<i[c].length;f++)if(i[c][f].CSS=="rowheader"&&i[c][f].Value!=""&&s[r].split("~~")[s[r].split("~~").length-1]==i[c][f].Value){g=f;u.push(g);u.push(s[r]);v.push(u);break}for(e=0;e<v.length;e++){for(u=[],r=0;r<i.length;r++)for(f=v[e][0];f<i[r].length;f++){i[r][f].CSS==" value"&&(o={},o.Item1=v[e][1].indexOf("~~")>=0?v[e][1].split("~~")[0]:v[e][1],o.Item2=i[r][f].Value,u.push(o));break}u.length!=0&&k.push(u)}}l.labelTags=nt;l.drillTags=tt;l.measureNames=y;l.points_Y=k;l.seriesNames=p;l.treemapLabels=s;ptreemapProxy._JSONRecords=l;this.renderTreeMapFromJSON(l);this._unWireEvents();this._wireEvents()},_wireEvents:function(){typeof oclientProxy=="undefined"&&n(window).bind("resize",n.proxy(this._reSizeHandler,this))},_drillTreeMap:function(r){var o=null,f,u,e;if(n(r.target).hasClass("drillGroupRect")){for(typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?n("#"+oclientProxy._id+"_maxView")[0]?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!0}):oclientWaitingPopup.show():ptreemapProxy._waitingPopup.show(),ptreemapProxy._currentAction="drilldown",u=0;u<n(ptreemapProxy.element).find(".drillGroupRect").length;u++)if(r.target==n(ptreemapProxy.element).find(".drillGroupRect")[u])for(ptreemapProxy._selectedItem=n(ptreemapProxy.element.find("._templateDiv").children()[u]).text(),f=0;f<ptreemapProxy._treeMapDatasource.length;f++)if(ptreemapProxy._treeMapDatasource[f].Tag.split("::")[2]==ptreemapProxy._selectedItem){if(ptreemapProxy._selectedTagInfo=ptreemapProxy._treeMapDatasource[f].Tag,ptreemapProxy.model.operationalMode==t.PivotTreeMap.OperationalMode.ClientMode&&(o=ptreemapProxy._treeMapDatasource[f].drillTag),ptreemapProxy._selectedTagInfo.split("::")[ptreemapProxy._selectedTagInfo.split("::").length-1]!=2){typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?n("#"+oclientProxy._id+"_maxView")[0]!=(i||null)?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!1}):oclientWaitingPopup.hide():ptreemapProxy._waitingPopup.hide();return}break}ptreemapProxy._startDrilldown=!0;ptreemapProxy.model.operationalMode==t.PivotTreeMap.OperationalMode.ServerMode?(ptreemapProxy.model.beforeServiceInvoke!=null&&ptreemapProxy._trigger("beforeServiceInvoke",{action:ptreemapProxy._currentAction,element:ptreemapProxy.element,customObject:ptreemapProxy.model.customObject}),e=JSON.stringify(ptreemapProxy.model.customObject),ptreemapProxy.model.customObject!=""&&ptreemapProxy.model.customObject!=null&&ptreemapProxy.model.customObject!=i?typeof oclientProxy!="undefined"?ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport(),clientReports:oclientProxy.reports,customObject:e}),ptreemapProxy.renderControlSuccess):ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport(),customObject:e}),ptreemapProxy.renderControlSuccess):!typeof oclientProxy!="undefined"?ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport()}),ptreemapProxy.renderControlSuccess):ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport(),clientReports:oclientProxy.reports}),ptreemapProxy.renderControlSuccess)):t.olap._mdxParser.updateDrilledReport({uniqueName:o},"rowheader",ptreemapProxy)}else{if(typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?n("#"+oclientProxy._id+"_maxView")[0]?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!0}):oclientWaitingPopup.show():ptreemapProxy._waitingPopup.show(),ptreemapProxy._currentAction="drillup",n(r.target).hasClass("e-drilldownHeader"))if(ptreemapProxy.getJsonRecords().treemapLabels[0].indexOf("~~")>=0){for(ptreemapProxy._selectedItem=ptreemapProxy.getJsonRecords().treemapLabels[0].split("~~")[ptreemapProxy.getJsonRecords().treemapLabels[0].split("~~").length-2],u=0;u<ptreemapProxy.getJsonRecords().labelTags.length;u++)if(ptreemapProxy.getJsonRecords().labelTags[u].split("::")[2]==ptreemapProxy._selectedItem){if(ptreemapProxy._selectedTagInfo=ptreemapProxy.getJsonRecords().labelTags[u],ptreemapProxy.model.operationalMode==t.PivotTreeMap.OperationalMode.ClientMode&&(o=ptreemapProxy.getJsonRecords().drillTags[u]),ptreemapProxy._selectedTagInfo.split("::")[ptreemapProxy._selectedTagInfo.split("::").length-1]!=1){typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?n("#"+oclientProxy._id+"_maxView")[0]!=(i||null)?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!1}):oclientWaitingPopup.hide():ptreemapProxy._waitingPopup.hide();return}break}}else{typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?n("#"+oclientProxy._id+"_maxView")[0]!=(i||null)?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!1}):oclientWaitingPopup.hide():ptreemapProxy._waitingPopup.hide();return}ptreemapProxy._tagCollection.length==0&&(ptreemapProxy._isDrilled=!1);ptreemapProxy._startDrilldown=!0;ptreemapProxy.model.operationalMode==t.PivotTreeMap.OperationalMode.ServerMode?(ptreemapProxy.model.beforeServiceInvoke!=null&&ptreemapProxy._trigger("beforeServiceInvoke",{action:ptreemapProxy._currentAction,element:ptreemapProxy.element,customObject:ptreemapProxy.model.customObject}),e=JSON.stringify(ptreemapProxy.model.customObject),ptreemapProxy.model.customObject!=""&&ptreemapProxy.model.customObject!=null&&ptreemapProxy.model.customObject!=i?typeof oclientProxy!="undefined"?ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport(),clientReports:oclientProxy.reports,customObject:e}),ptreemapProxy.renderControlSuccess):ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport(),customObject:e}),ptreemapProxy.renderControlSuccess):!typeof oclientProxy!="undefined"?ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport()}),ptreemapProxy.renderControlSuccess):ptreemapProxy.doAjaxPost("POST",ptreemapProxy.model.url+"/"+ptreemapProxy.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drillInfo:ptreemapProxy._selectedTagInfo,olapReport:ptreemapProxy.getOlapReport(),clientReports:oclientProxy.reports}),ptreemapProxy.renderControlSuccess)):t.olap._mdxParser.updateDrilledReport({uniqueName:o,action:"collapse"},"rowheader",ptreemapProxy)}},_unWireEvents:function(){n(window).unbind("resize",n.proxy(this._reSizeHandler,this))},renderControlSuccess:function(t){ptreemapProxy=this;typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null&&(n("#"+oclientProxy._id+"_maxView")[0]?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!0}):oclientWaitingPopup.show());try{if(t[0]!=i?(this.setJsonRecords(t[0].Value),this.setOlapReport(t[1].Value),typeof oclientProxy!="undefined"&&(oclientProxy.currentReport=t[1].Value,t[2]!=null&&t[2]!=i&&t[2].Key=="ClientReports"&&(oclientProxy.reports=t[2].Value)),t[2]!=null&&t[2]!=i&&!t[2].Key=="ClientReports"&&(this.model.customObject=t[2].Value)):t.d!=i?(this.setJsonRecords(t.d[0].Value),this.setOlapReport(t.d[1].Value),typeof oclientProxy!="undefined"&&(oclientProxy.currentReport=t.d[1].Value,t.d[2]!=null&&t.d[2]!=i&&t.d[2].Key=="ClientReports"&&(oclientProxy.reports=t.d[2].Value)),t.d[2]==null||t.d[2]==i||t.d[2].Key=="ClientReports"||(this.model.customObject=t.d[2].Value)):(this.setJsonRecords(t.JsonRecords),this.setOlapReport(t.OlapReport),t.customObject!=null&&t.customObject!=null&&(this.model.customObject=t.customObject),typeof oclientProxy!="undefined"&&(typeof oclientProxy.currentReport!="undefined"&&(oclientProxy.currentReport=t.OlapReport),typeof oclientProxy.reports!="undefined"&&t.reports!=i&&t.reports!="undefined"&&(oclientProxy.reports=t.reports))),this.model.afterServiceInvoke!=null){var r;r=this._currentAction!="initialize"?{action:this._currentAction,element:this.element,customObject:this.model.customObject}:{action:this._currentAction,element:this.element,customObject:this.model.customObject};this._trigger("afterServiceInvoke",r)}this.renderTreeMapFromJSON(this.getJsonRecords());this._unWireEvents();this._wireEvents();this._currentAction!="initialize"&&(this.model.currentReport=this.getOlapReport(),this._trigger("drillSuccess",this.element));typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?(n("#"+oclientProxy._id+"_maxView")[0]?(n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!1}),oclientWaitingPopup.hide()):typeof oclientProxy.ogridObj!="undefined"&&(oclientProxy&&oclientProxy.ogridObj._drillAction&&!oclientProxy.ogridObj._startDrilldown||oclientProxy.otreemapObj._currentAction&&!oclientProxy.otreemapObj._startDrilldown?oclientWaitingPopup.hide():!oclientProxy||oclientProxy.ogridObj._drillAction!=""||oclientProxy.otreemapObj._currentAction!=""||oclientProxy.ogridObj._startDrilldown||oclientProxy.otreemapObj._startDrilldown||oclientProxy.ogridObj._JSONRecords==null&&oclientProxy.otreemapObj._JSONRecords!=null?!oclientProxy.otreemapObj._startDrilldown||oclientProxy.ogridObj._startDrilldown||n("#"+oclientProxy._id+"_maxView")[0]?oclientProxy.otreemapObj._startDrilldown||oclientProxy.ogridObj._startDrilldown||oclientProxy.otreemapObj._currentAction!=""||oclientProxy.ogridObj._drillAction!=""||oclientProxy.ogridObj._JSONRecords==null&&oclientProxy.otreemapObj._JSONRecords!=null||oclientWaitingPopup.hide():oclientWaitingPopup.show():oclientWaitingPopup.hide()),oclientProxy.model.displaySettings.mode=="chartonly"&&oclientWaitingPopup.hide()):this._waitingPopup.hide();typeof oclientProxy!="undefined"&&(oclientProxy.otreemapObj._startDrilldown=!1)}catch(u){}},renderTreeMapFromJSON:function(i){var e,f,o,s,r,u,h;if(this._treeMapDatasource=[],e="",t.isNullOrUndefined(i)||i.length<=0||i.labelTags.length==0||i.points_Y.length==0){typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null?oclientWaitingPopup.hide():this._waitingPopup.hide();return}if(t.isNullOrUndefined(i.chartLables)?i.treemapLabels:i.treemapLabels=i.chartLables,i.points_Y.length!=i.treemapLabels.length)for(oclientProxy._onFiltered=!1,f=[],r=0;r<JSON.parse(JSON.stringify(ptreemapProxy.getJsonRecords().points_Y)).length-1;r++)f.push(JSON.parse(JSON.stringify(ptreemapProxy.getJsonRecords().points_Y))[r]);else f=JSON.parse(JSON.stringify(ptreemapProxy.getJsonRecords().points_Y));for(typeof oclientProxy!="undefined"&&oclientProxy.model.enableDeferUpdate&&oclientProxy._ischartTypesChanged&&(oclientProxy._ischartTypesChanged=!1),o=t.buildTag("div#"+this._id+"TreeMapContainer","",{height:typeof oclientProxy!="undefined"?oclientProxy._chartHeight:this.element.height(),width:typeof oclientProxy!="undefined"?oclientProxy._chartWidth:this.element.width()})[0].outerHTML,this.element.html(o),r=0;r<f.length;r++)for(s=ptreemapProxy.getJsonRecords().treemapLabels[r].split("~~")[ptreemapProxy.getJsonRecords().treemapLabels[r].split("~~").length-1],u=0;u<f[r].length;u++)f[r][u].Item1=f[r][u].Item1.replace(f[r][u].Item1,s),f[r][u].Column=ptreemapProxy.getJsonRecords().seriesNames[u],f[r][u].Measures=ptreemapProxy.getJsonRecords().measureNames,f[r][u].Tag=n.grep(ptreemapProxy.getJsonRecords().labelTags,function(n){return n.split("::")[2]==f[r][u].Item1})[0],this.model.operationalMode==t.PivotTreeMap.OperationalMode.ClientMode&&(f[r][u].drillTag=n.grep(ptreemapProxy.getJsonRecords().drillTags,function(n){return n.split("::")[2]==f[r][u].Item1})[0]),f[r][u][f[r][u].Tag.split("::")[1].split(".")[0].replace("[","").replace("]","")]=f[r][u].Item1,f[r][u].RowItem=f[r][u].Item1,f[r][u].Value=f[r][u].Item2!=""?f[r][u].Item2:0,f[r][u].Index=u,delete f[r][u].Item1,delete f[r][u].Item2,e+=(e==""?"":";")+f[r][u].Tag.split("::")[1].split(".")[0].replace("[","").replace("]","");for(r=0;r<f.length;r++)for(u=0;u<f[r].length;u++)f[r][u].Value=t.globalize.parseFloat(t.globalize.format(f[r][u].Value,"c")),this._treeMapDatasource.push(f[r][u]);e=e.split(";")[0];n("#"+this._id+"TreeMapContainer").ejTreeMap({dataSource:this._treeMapDatasource,showTooltip:!0,tooltipTemplate:"tooltipTemplate",enableDrillDown:typeof oclientProxy!="undefined"?oclientProxy.model.enableDeferUpdate?!1:!0:!0,uniColorMapping:{color:"#CCDFE3"},drillStarted:this._drillTreeMap,drillDownSelectionColor:"#199DAF",weightValuePath:"Value",levels:[{groupPath:e,showLabels:!0,groupGap:2,headerHeight:25,labelPosition:"topleft",labelVisibilityMode:"visible"}]});this._treeMap=n("#"+this._id+"TreeMapContainer").data("ejTreeMap");this._treeMap.rowItem=e;n.views.helpers({Measures:function(t){return n("#"+this._id+"TreeMapContainer").ejTreeMap("enableDrillDown")?t.data[0].Measures:t.Measures},Column:function(t){return n("#"+this._id+"TreeMapContainer").ejTreeMap("enableDrillDown")?t.header:t[this._treeMap.rowItem]},Value:function(t){var r=0,i;if(n("#"+this._id+"TreeMapContainer").ejTreeMap("enableDrillDown"))for(i=0;i<t.data.length;i++)r+=parseFloat(t.data[i].Value);else r=t.Value;return r}});h={action:this._currentAction,customObject:this.model.customObject,element:this.element};this._trigger("renderSuccess",h);typeof oclientProxy!="undefined"&&n("#"+this._id+"TreeMapContainer").css({width:"100%"});this._treeMap.refresh();ptreemapProxy=this;ptreemapProxy._JSONRecords=i;this.model.operationalMode==t.PivotTreeMap.OperationalMode.ClientMode&&this._waitingPopup.hide()},_reSizeHandler:function(){var n=this.element.find("#"+this._id+"TreeMapContainer").height(this.element.height()).width(this.element.width()).data("ejTreeMap");t.isNullOrUndefined(n)&&this._treeMap.refresh()},doAjaxPost:function(r,u,f,e,o,s){var h,c,l,a=!0;f.XMLA==i?(h="application/json; charset=utf-8",c="json",l=n.proxy(e,this)):(h="text/xml",c="xml",f=f.XMLA,l=n.proxy(e,t.olap.base,s),a=!t.isNullOrUndefined(s)&&s.action!="loadFieldElements"?!0:!1);n.ajax({type:r,url:u,contentType:h,async:a,dataType:c,data:f,success:l,complete:t.proxy(function(t){n.proxy(t,this);var i={action:this._currentAction,customObject:this.model.customObject,element:this.element};this._trigger("renderComplete",i)},this),error:t.proxy(function(n){typeof this._waitingPopup!="undefined"&&this._waitingPopup!=null&&this._waitingPopup.hide();typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null&&oclientWaitingPopup.hide();var i={action:this._currentAction,customObject:this.model.customObject,element:this.element,Message:n};this._trigger("renderFailure",i);this.renderTreeMapFromJSON("");this.model.dataSource.cube!=""&&this.model.operationalMode==t.PivotTreeMap.OperationalMode.ClientMode&&this._createErrorDialog(n.statusText,"Error");n.statusText},this)})},doPostBack:function(t,i){var r=n("<form>").attr({action:t,method:"POST",name:"export"}),f=function(t,i){var u=n('<input type="hidden" title="params">').attr({id:t,name:t,value:i}).appendTo(r)};for(var u in i)f(u,i[u]);r.appendTo(document.body).submit().remove()}});t.PivotTreeMap.OperationalMode={ClientMode:"clientmode",ServerMode:"servermode"}})(jQuery,Syncfusion)});
